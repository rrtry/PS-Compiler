# Семантика типов

## Встроенные типы

| Тип      | Описание                                            |
|----------|-----------------------------------------------------|
| `int`    | целое знаковое 64-бит                               |
| `float`  | IEEE 754 binary64 (double)                          |
| `string` | неизменяемая Unicode-строка, хранение UTF-8         |
| `void`   | отсутствие значения (только для функций)            |

## Логические значения
- Нет отдельного типа `bool`
- `true`  → синтаксический сахар для `1` (int)
- `false` → синтаксический сахар для `0` (int)
- Любое ненулевое `int` считается истинным в условиях

## Преобразования

### Неявные
- `int → float` (при арифметических операциях)

### Явные (встроенные функции преобразования)
- `int(x)`   — из float или string в int (отбрасывание дробной части)
- `float(x)` — из int или string в float
- `str(x)`   — любое значение → string

------------------------------------------------------------------------

## 2. Литералы

### 2.1. Целые числа (int)

Поддерживаются литералы:

-   десятичные: `42`
-   шестнадцатеричные: `0x2A`
-   двоичные: `0101010`

### 2.2. Числа с плавающей точкой (float)

Примеры литералов: `3.14`, `0.5`, `-12.75`

### 2.3. Строки (string)

Строковые литералы заключаются в кавычки `"...'"`:

-   `"Hello"`
-   `"Привет мир"`

Строки поддерживают Unicode, хранятся в UTF‑8.

------------------------------------------------------------------------

## 3. Операторы

### 3.1. Арифметические операторы (`+`, `-`, `*`, `/`, `%`, `^`, `**`)

-   Если операнды `int` и `int` → результат `int`.
-   Если один из операндов `float` → второй приводится к `float`,
    результат `float`.
-   `%` допустим только для `int`.

### 3.2. Операторы сравнения (`<`, `>`, `<=`, `>=`, `==`, `!=`)

Результат --- логическое значение (`1` = true, `0` = false).

### 3.3. Логические операторы (`&&`, `||`, `!`)

Принимают значения, приводимые к `true` / `false`.

### 3.4. Строковые операции

-   Конкатенация: `concat(a, b)`
-   Подстрока: `substr(s, start, length)`

------------------------------------------------------------------------

## 4. Переменные

### 4.1. Объявление переменных

    let x: int;
    x = 40;
    let y: float;
    y = 3.33
    let name: string;
    name = "Bob";

### 4.2. Правила семантики

-   Если тип указан → переменная должна получить значение этого типа.
-   Если тип не указан → выводится по значению при первом присваивании.
-   После первого присваивания тип становится фиксированным.

### 4.3. Присваивание

    x = expr;

Тип выражения должен подходить под тип переменной.

------------------------------------------------------------------------

## 5. Преобразования типов

### 5.1. Неявные преобразования

-   `int → float`

### 5.2. Явные преобразования

-   `int(x)` --- преобразует строку или float в int.
-   `float(x)` --- преобразует строку или int в float.
-   `str(x)` --- преобразует любое значение в string.

#### Пример

    let x: int = 54;
    let s = str(x);
    let f = float(x);

------------------------------------------------------------------------

## 6. Тип int --- детали

-   Размер: **64 бита** (знаковый).
-   Максимум: `9_223_372_036_854_775_807`
-   Минимум: `−9_223_372_036_854_775_808`
-   Полная поддержка арифметики.

------------------------------------------------------------------------

## 7. Тип float --- детали

-   Формат: **IEEE 754 binary64**.
-   Поддержка всех арифметических операторов.
-   Преобразование в int:



    6.5 → 7
    7.5 → 8
    6.3 → 6
    7.3 → 7

------------------------------------------------------------------------

## 8. Тип string --- детали

-   Unicode, хранится как UTF‑8.
-   Конкатенация --- `concat(a, b)`
-   Подстрока --- `substr(a, start, length)`
-   Сравнение по Unicode‑кодам символов
-   Не является выражением

------------------------------------------------------------------------

## print и input
- `print(expr: string)` — выводит строку
- Чтобы вывести число: `print(str(x))`
- `input(var)` — считывает строку и пытается привести к типу переменной `var`

## 9. Примеры программ

### ReverseString

```
fn reverse(s: string): string
{
    let len = 0;
    while (substr(s, len, 1) != "\n") 
    {
        len++;
    }

    let result = "";
    let i = len - 1;
    while (i >= 0) {
        let ch = substr(s, i, 1);
        result = concat(result, ch);
        i--;
    }

    return result;
}

fn main()
{
    let text: string;
    text = input();

    let reversed = reverse(text);
    print(reversed);
}
```


### FizzBuzz
```
fn main()
{
    print("Введите числа (0 — выход):");
    let x = true;
    while (x = true) 
    {
        let n: int;
        n = int(input());

        if (n == 0) 
        {
            print("Выход");
            break;
        }

        if (n % 15 == 0) 
        {
            print("FizzBuzz");
        }
        else if (n % 3 == 0) 
        {
            print("Fizz");
        }
        else if (n % 5 == 0) 
        {
            print("Buzz");
        }
        else 
        {
            print(str(n));
        }
    }
}
```


### CountVowels

```
fn is_vowel(ch: string): int
{
    let lower = ch;
    if (ch == "A" || ch == "E" || ch == "I" || ch == "O" || ch == "U" || ch == "Y") 
    {
    
    }
    else if (ch == "a" || ch == "e" || ch == "i" || ch == "o" || ch == "u" || ch == "y") 
    {

    }
    else 
    {
        return 0;
    }
    return 1;
}

fn count_vowels(s: string): int
{
    let count = 0;
    let i = 0;
    let ch = substr(s, i, 1);

    while (ch != "\n") 
    {
        if (is_vowel(ch) = true) 
        {
            count++;
        }
        i++;
        ch = substr(s, i, 1);
    }
    return count;
}

fn main()
{
    let text: string;
    input(text);

    let vowels = count_vowels(text);
    print(str(vowels));
}
```